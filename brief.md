Обо мне
===

О GetShopTV
===

Чем мы занимаемся?
---

С кем и почему интегрируемся?
---

Как устроен наш сервер. О библиотеке `servant`
---

Основные проблемы при написании клиента
===

- Несоответствие типов
- Опечатки в названиях
- Незадокументированные параметры
- Отсутствие/противоречивость примеров
- Нестандартный ответ (хуки или 200 Ok с телом, что произошла ошибка)

Примеры для каждого пункта.
Строгая типизация Haskell очень помогает найти ошибки и быстро их исправить.
Уже на этапе компиляции можно обнаружить пропущенные параметры.

Общие советы
===

- Очень внимательно читать документацию, какой бы ужасной она не была.
  Попробовать переписать под себя в удобном виде (отсортировать endpointы,
  выделить сомнительные части)
- Проверить всё curlом -- станут понятны реальные типы данных
- Описать используемые типы данных -- лучше отдельно для запросов/ответов
- Если непонятно, что на самом деле приходит в ответ, везде использовать
  универсальное представление: текст или JSON
- Описать API
- Описать клиента для API. Лучше по одному endpointу или по группам
- Тестировать по отдельности, пробовать все варианты, убирать параметры,
  добавлять лишние и т.д.
- Проработать реальные сценарии
- Примерная структура:
```
  Foo/
    API.hs
    Client.hs
    Types/
        Request.hs
        Response.hs
        Common.hs
```

Чем наша документация лучше?
===

Генерация swagger.json автоматически
---

Проверка соответствия ToJSON и ToSchema
---

Проверка соответствия сгенерированного файла и реального API
---

swagger-ui и "живое" тестирование
---

Заключение
===

